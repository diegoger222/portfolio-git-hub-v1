name: CI Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: ['**']

jobs:
  check-affected:
    uses: ./.github/workflows/check-affected.yml
    secrets: inherit

  w-backend:
    needs: check-affected
    if: needs.check-affected.outputs.affected_w_backend == 'true'
    uses: ./.github/workflows/w-backend.yml
    secrets: inherit
